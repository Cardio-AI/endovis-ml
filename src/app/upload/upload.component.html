<div class="upload">
  <div class="view-section upload-dialog">
    <div class="upload-dialog-form">
      <input type="file" id="file-upload" (input)="readFiles($event)" multiple>
      <label for="file-upload">
        <div class="upload-dialog-form-files" appFileDrop>
          <div id="upload-dialog-form-files-message">
            <ng-container *ngIf="uploadedFiles.length; else notUploaded">
              <span>{{uploadedFiles.length + " files uploaded"}}</span>
              <ng-container *ngIf="uploadedFiles.length < selectedFiles.length; else uploadSuccess">
                <progress id="upload-progress" [value]="uploadedFiles.length" [max]="selectedFiles.length"></progress>
              </ng-container>
            </ng-container>


            <ng-template #notUploaded>
              Drag and drop or click to browse
            </ng-template>

            <ng-template #uploadSuccess>
              &#9989;
            </ng-template>
          </div>
        </div>
      </label>

      <div class="form-element form-input-element">
        <label for="separator">Value delimiter</label>
        <select class="input-select" id="separator" [(ngModel)]="delimiter">
          <option *ngFor="let separator of separators" [value]="separator">{{ separator | capitalize }}</option>
          <!--          <option value="tab">Tab</option>-->
          <!--          <option value="semicolon">Semicolon</option>-->
        </select>
        <span class="form-hint">Value separator used in phase and instrument annotation files</span>
      </div>

      <div class="form-element form-input-element">
        <label for="phase-id">Phase file identifier</label>
        <input type="text" class="input-text" id="phase-id" placeholder="e.g. phase" [(ngModel)]="phaseId">
        <span class="form-hint">Part of file name that is specific for phase annotation files</span>
      </div>

      <div class="form-element form-input-element">
        <label for="inst-id">Instrument file identifier</label>
        <input type="text" class="input-text" id="inst-id" placeholder="e.g. tool" [(ngModel)]="instId">
        <span class="form-hint">Part of file name that is specific for instrument annotation files</span>
      </div>

      <div class="form-element form-input-element">
        <label for="phase-labels">Phase labels</label>
        <textarea class="input-textarea" id="phase-labels" [(ngModel)]="phaseLabels"></textarea>
        <span class="form-hint">Comma-separated list of phase labels (ordered)</span>
      </div>

      <div class="form-element form-input-element">
        <label for="phase-labels">Instrument labels</label>
        <textarea class="input-textarea" id="inst-labels" [(ngModel)]="instLabels"></textarea>
        <span class="form-hint">Comma-separated list of instrument labels</span>
      </div>

      <div class="form-element form-input-element">
        <label>Cross-validation splits</label>

        <div class="table">
          <div class="table-header">
            <div>Training</div>
            <div>Validation</div>
          </div>
          <ng-container *ngFor="let _ of crossValSplit; let i = index">
            <div class="table-row">
              <textarea class="table-cell" [(ngModel)]="crossValSplit[i][0]"></textarea>
              <textarea class="table-cell" [(ngModel)]="crossValSplit[i][1]"></textarea>
            </div>
          </ng-container>
        </div>

      </div>
      <div class="cross-val-row">
        <span class="form-hint">Comma-separated list of surgery IDs of the cross-validation splits</span>
      </div>

      <div class="form-buttons">
        <button class="button button-medium" (click)="addSplit()">+</button>
        <button class="button button-medium" (click)="removeSplit()">-</button>
      </div>

      <div class="form-element form-input-element">
        <label for="test-set">Test split</label>
        <textarea class="input-textarea" id="test-set" [(ngModel)]="testSet"></textarea>
        <span class="form-hint">Comma-separated list of surgery IDs from the test set</span>
      </div>

      <div class="form-element form-buttons">
        <button class="button button-large" (click)="processFiles()">Process data</button>
      </div>
    </div>
  </div>
</div>
